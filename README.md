# flutterQRDecode
scan Health record QR code (encoded in CRED or SHC format) and decode it

**qrcode_flutter**
It uses qrcode_flutter: ^3.0.0-nullsafety.0 which is a pre-release version.

Also, in-order for qrcode_flutter to compile correctly we need to use Android Build Tool v 3.5.0 instead of 4.1.0.
Android\Gradle\build.gradle
dependencies {
        classpath 'com.android.tools.build:gradle:3.5.0'
       
We might want to investigate other QR libraries or wait for qrcode_flutter to be upgraded

**Decode health record QR**
This project can decode health records encoded in CRED or SHC format. A record scanned without decoding will look like:

CRED:STATUS:2:GBCQEIIAWXECNVIUJQXPDV44EW3UHJIGNBGK4ITZAKX37MJNXG6IQZDXS7ZAEIB3ROQ2EWIRYH66FGPJOWBWP3MK6YTYVGJE332CXM6V2YQOBLHECU:1A9.PCF.PW:1//JD82

shc:/56762909524320603460292437404460312229595326546034602925407728043360287028647167452228092862457056401240543925665561413536615568374267333225672544412171376212745306633640234507540508375262547145062928530424605736011045353153717074242441507542220656672276294171527163050337450028030340303105596853313558367620672842095857001236556376623825290304034025530361330631640045063727673556622844543634715062725320237311045226232969206557382766226954325824531259603254112762423323237610062103243844694410036922683032702569414504415943775920762233275462272370587753563171335754594472545250053103762633210837097262086806377308587455677753342509250905692252535920582731455858725369687112122159265967550823723077585755376876762661264022505673727533687623423435220555743142620604765767265450740737416063403477633706347510736650062432122152732221097407732263687463254467454271423350347664375745706059737020751272383326580745096752095574733110703606255873732328060700447469442709356526620760432472255672361275002637283110557674247144577543354523336028637029525304646656667472662539426421087058072966500944325010563572362236073473455076034505222029276674284236216310455563283671674164350465053775122065505434403710403269337265035440724555713166455325212139290352082871276310040656422004712970063408630924437405327043680068226355506304577038674361343077426129526243247729703630033970273762233253600304433423343254300721394511103540424324375836506972296242296425126935437767345208593432442421680936376232775024587435557529665941522933054509673977236845752308546025662753425257612728763660052155532660631075383550327063675334613343724400562020746076555757610321592573656829545030571145116725123839630759006161311275502062013229643436065312000738296750530545202534413644224332635564405012436842355555235766210850364006373535001004215664585907061059452477702030692936713836644376356445333566296720

**Decoding using js library**
Please use the sites below (all supported by PathCheck) for more information.
https://www.pathcheck.org/en/universalverifier
https://github.pathcheck.org/index.html
https://github.com/Path-Check/paper-cred-demo/blob/main/verify.java

Unfortunately there is no flutter library to support CRED or SHC records decoing.

We did find js libraries to do that. cred-sdk.min.js and shc-sdk.min.js. (and there are more to support other formats)

To utilize them we first tried flutter_js. However it only works in flutter web, not flutter native.

At this point we only figured out how to use webview_flutter to include a html file in flutter navtive and communicate between flutter and js.

**More to do with webview_flutter**
the html file and js files are under the asset folder. Current version of webview_flutter does not support css / js reference, so you will see we included the whole js content in the html file. We will see if this can be improved...
